(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-result-result"],{4271:function(t,e,i){"use strict";i.r(e);var n=i("7e8b"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"5bf0":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniSection:i("a9ef").default,uniList:i("23f9").default,uniListItem:i("cace").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"image"},[i("v-uni-image",{attrs:{src:t.tempFilePath,mode:"aspectFit"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}})],1),i("uni-section",{attrs:{title:"识别结果",type:"line"}}),i("uni-list",t._l(t.result,(function(t,e){return i("uni-list-item",{key:e,attrs:{showArrow:!0,clickable:!0,to:"../detail/detail?url="+encodeURIComponent("https://baike.baidu.com/item/"+(t.keyword||t.name)),note:"相似度: "+(t.score||t.probability),title:t.keyword||t.name}})})),1)],1)},o=[]},"5ee6":function(t,e,i){"use strict";function n(t,e){var i=new Image;i.src=t,i.onload=function(){var i=document.createElement("canvas"),n=i.getContext("2d");i.width=this.width,i.height=this.height,n.clearRect(0,0,i.width,i.height),n.drawImage(this,0,0,i.width,i.height);var a=i.toDataURL("image/jpeg",1/(t.length/96666));e(a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.base64Compress=n},"7e8b":function(t,e,i){"use strict";i("c975"),i("fb6a"),i("4e82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("e659"),a=i("5ee6"),o={data:function(){return{tempFilePath:"",apiUrl:"",result:[]}},onLoad:function(t){uni.setNavigationBarTitle({title:t.title}),this.tempFilePath=t.tempFilePath,this.apiUrl=t.apiUrl,this.request()},methods:{chooseImage:function(){var t=this;uni.chooseImage({count:1,success:function(e){t.tempFilePath=e.tempFilePaths[0],t.request()}})},request:function(){var t=this;this.result=[];var e="object"===typeof plus?"https://aip.baidubce.com":getApp().globalData.proxy_server;uni.showLoading({title:"识别中",mask:!0,success:function(){(0,n.pathToBase64)(t.tempFilePath).then((function(i){(0,a.base64Compress)(i,(function(i){uni.request({url:e+"/rest/2.0"+t.apiUrl+"?access_token="+getApp().globalData.access_token,data:{image:encodeURI(i.slice(i.indexOf(",")+1))},method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(e){e.data.error_msg||/非/.test(e.data.result[0].name)?uni.showToast({title:e.data.error_msg||e.data.result[0].name,icon:"none"}):t.result=e.data.result.sort((function(t,e){return t.score?e.score-t.score:e.probability-t.probability}))},fail:function(){uni.showToast({title:"网络连接失败",icon:"none"})},complete:function(){uni.hideLoading()}})}))})).catch((function(t){uni.navigateTo({url:"../index/index"})}))}})}}};e.default=o},b1b9:function(t,e,i){"use strict";i.r(e);var n=i("5bf0"),a=i("4271");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var s,r=i("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"3c4bd4ca",null,!1,n["a"],s);e["default"]=u.exports}}]);